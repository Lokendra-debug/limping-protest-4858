<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
</head>

<style>
    #santhi-main{
    display: grid;
    grid-template-columns: repeat(4,1fr);
}
</style>
<body>

        <select name="" id="filter">
         <option value="">brand name</option>
        <option value="Roadster">Roadster</option>
        <option value="Jack & Jones">Jack & Jones</option>
        <option value="H&M">H&M</option>
        <option value="HERE&NOW">HERE&NOW</option>
        <option value="WROGN">WROGN</option>
    </select>
    <select id="sort">
        <option value="">sorting</option>
        <option value="asc">asc</option>
        <option value="desc">desc</option>
    </select>

<div id="santhi-main">
<!-- dataappen here -->
</div>
</body>
<script>
    let main=document.getElementById("santhi-main") 
    let sort=document.getElementById("sort")
    console.log(main)
    async function fetchdata() {
        try{
            let res=await fetch("https://63f70f9de40e087c9586b6a6.mockapi.io/products")
            let  data=await res.json();
            randercardlist(data)
            console.log(data)
            let filtered=document.getElementById("filter");


            //**********filter***************//
           filtered.addEventListener("change",()=>{
           if(filtered.value===""){
            randercardlist(data)
              
    sort.addEventListener("change",()=>{

       if(sort.value===""){
        randercardlist(data)
       }else if(sort.value==="asc"){
        let ascsort=data.sort((a,b)=>a.price-b.price)
        randercardlist(ascsort)
       }else if(sort.value==="desc"){
        let descsort=data.sort((a,b)=>b.price-a.price)
        randercardlist(descsort)
       }
    })

            
           }
           
           
           
           
           else{
            let filtereddata=data.filter((ele)=>{
                return ele.brand===filtered.value
            })            
        randercardlist(filtereddata)



          
    sort.addEventListener("change",()=>{

       if(sort.value===""){
        randercardlist(data)
       }else if(sort.value==="asc"){
        let ascsort=filtereddata.sort((a,b)=>a.price-b.price)
        randercardlist(ascsort)
       }else if(sort.value==="desc"){
        let descsort=filtereddata.sort((a,b)=>b.price-a.price)
        randercardlist(descsort)
       }
    })
        }





    })
   
    sort.addEventListener("change",()=>{
       if(sort.value===""){
        randercardlist(data)
       }else if(sort.value==="asc"){
        let ascsort=data.sort((a,b)=>a.price-b.price)
        randercardlist(ascsort)
       }else if(sort.value==="desc"){
        let descsort=data.sort((a,b)=>b.price-a.price)
        randercardlist(descsort)
       }
    })
       }catch(err){
            console.log(err)
        } 
    }
    fetchdata()    
    function randercardlist(data){
          main.innerHTML="";
     data.forEach(element => {
       let card=document.createElement("div") 
       let img=document.createElement("img")
       let brand=document.createElement("p")
       let category=document.createElement("h4")
        let gender=document.createElement("p")
        let description=document.createElement("p")
        let price=document.createElement("p")
        let quantity=document.createElement("p")
        let rating=document.createElement("p")
       img.src=element.image
       brand.textContent=element.brand;
       category.textContent=element.category;
       gender.textContent=element.gender;
       description.textContent=element.description
       price.textContent=element.price
       quantity.textContent=element.quantity
       rating.textContent=element.rating
      card.append(img,brand,category,gender,description,price,quantity,rating)
       main.append(card)
     });
    }
</script>
</html>